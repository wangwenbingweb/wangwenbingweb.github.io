webpackJsonp([35],{WvBT:function(e,t){},yTOf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),r=a("mvHQ"),i=a.n(r),o=a("exGp"),c=a.n(o),u=a("Dd8w"),d=a.n(u),l=a("bOdI"),p=a.n(l),h=(a("eqfM"),a("/QYm")),v=a("NYxO"),m={name:"bindingTel",components:p()({},h.a.name,h.a),data:function(){return{userPhone:"",sendAuthCode:!0,auth_time:0,verificationCode:"",countries:this.$store.state.countries||"中国",code:this.$store.state.areaCode||"86",taskId:"",token:"",pass:"",inviteCode:"",inputType:"password",eye:!0,downPhone_:!1,downPass_:!1,openid:this.$route.query.openid,wxNickname:this.$route.query.wxNickname}},mounted:function(){},computed:{scrollHeight:function(){return document.documentElement.scrollTop||document.body.scrollTop||0},isDisabled:function(){return!(this.userPhone&&this.pass&&this.verificationCode)},isDisabled1:function(){return 11!=this.userPhone.length}},methods:d()({},Object(v.b)(["SAVE_USERID","SAVE_TOKEN","SAVE_AREACODE","SAVE_MOBILE","SAVE_HEADPHOTOADD","SAVE_NICKNAME","SAVE_SELFINVITECODE","SAVE_TABACTIVE","SAVE_AGREEMENT"]),{blurIn:function(){var e=this;window.scrollTo(0,Math.max(this.scrollHeight-1,0)),setTimeout(function(){e.downPhone_=!1,e.downPass_=!1},200)},getInputValue:function(){this.userPhone.length>=1?this.downPhone_=!0:this.downPhone_=!1},getInputValue_:function(){this.pass.length>=1?this.downPass_=!0:this.downPass_=!1},downPass:function(){this.pass="",this.downPass_=!this.downPass_},downPhone:function(){this.userPhone="",this.downPhone_=!this.downPhone_},showPassword:function(){var e=this;e.eye?(e.eye=!1,e.inputType="text"):(e.eye=!0,e.inputType="password")},complete:function(){var e=this;return c()(s.a.mark(function t(){var a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.userPhone&&""!=e.verificationCode&&""!=e.pass){t.next=3;break}return Object(h.a)("请填写完整的信息"),t.abrupt("return",!1);case 3:if(/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]{6,20}$/.test(e.pass)){t.next=7;break}return Object(h.a)("密码不规范，请重新输入"),t.abrupt("return",!1);case 7:return(a=new FormData).append("openid",e.openid),a.append("wxNickname",e.wxNickname),a.append("type","H"),a.append("areaCode",e.code),a.append("mobile",e.userPhone),a.append("verifyCode",e.verificationCode),a.append("password",e.pass),t.next=17,e.$api.wxBindingMobile(a);case 17:if(2e4==(n=t.sent).data.code){t.next=37;break}if(200!=n.data.code){t.next=35;break}Object(h.a)("绑定成功"),e.SAVE_USERID(n.data.data.id),e.SAVE_TOKEN(n.data.data.token),e.SAVE_AREACODE(n.data.data.areaCode),e.SAVE_MOBILE(n.data.data.mobile),n.data.data.headphotoAdd?e.SAVE_HEADPHOTOADD(n.data.data.headphotoAdd):e.SAVE_HEADPHOTOADD(""),e.SAVE_SELFINVITECODE(n.data.data.selfInviteCode),n.data.data.nickname?e.SAVE_NICKNAME(n.data.data.nickname):e.SAVE_NICKNAME(""),"2"==n.data.data.oneDollarStatu?e.$cookies.set("badge",!1):"1"==n.data.data.oneDollarStatu&&e.$cookies.set("badge",!0),e.SAVE_TABACTIVE(""),e.SAVE_AGREEMENT(n.data.data.agreement),window.localStorage.setItem("store",i()(e.$store.state)),1==n.data.data.agreement?e.$router.push({path:"/welcome"}):e.$router.push({path:"/servicesOrdinance"}),t.next=37;break;case 35:return Object(h.a)(n.data.message),t.abrupt("return",!1);case 37:case"end":return t.stop()}},t,e)}))()},countdown:function(){var e=this;this.sendAuthCode=!1,this.auth_time=60;var t=setInterval(function(){e.auth_time--,e.auth_time<=0&&(e.sendAuthCode=!0,clearInterval(t))},1e3)},obtain:function(){var e=this;return c()(s.a.mark(function t(){var a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.userPhone){t.next=3;break}return Object(h.a)("手机号不能为空"),t.abrupt("return",!1);case 3:return(a=new FormData).append("phoneNum",e.userPhone),a.append("areaCode",e.code),a.append("sendType","binding"),t.next=9,e.$api.sendSms(a);case 9:if(2e4==(n=t.sent).data.code){t.next=18;break}if(200!=n.data.code){t.next=16;break}Object(h.a)("发送验证码成功"),e.countdown(),t.next=18;break;case 16:return Object(h.a)(n.data.message),t.abrupt("return",!1);case 18:case"end":return t.stop()}},t,e)}))()}})},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("div",{staticClass:"main_show"},[e._m(0),e._v(" "),n("div",{staticClass:"content"},[n("ul",[n("li",[n("div",{staticClass:"left"},[e._v(e._s(e.$t("m.Countries_regions")))]),e._v(" "),n("div",{staticClass:"region"},[n("router-link",{attrs:{to:{path:"/quhao"}}},[e._v(e._s(e.countries)+"（+"+e._s(e.code)+"）")]),e._v(" "),e._m(1)],1)]),e._v(" "),n("li",[n("div",{staticClass:"starLeft",attrs:{id:"starLeft"}},[e._m(2),e._v(" "),"86"==e.code?n("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],attrs:{type:"number",placeholder:e.$t("m.Please_phonenumber"),oninput:"if(value.length>11)value=value.slice(0,11)"},domProps:{value:e.userPhone},on:{keyup:function(t){return e.getInputValue()},blur:e.blurIn,input:function(t){t.target.composing||(e.userPhone=t.target.value)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],attrs:{type:"number",placeholder:e.$t("m.Please_phonenumber"),oninput:"if(value.length>15)value=value.slice(0,15)"},domProps:{value:e.userPhone},on:{keyup:function(t){return e.getInputValue()},blur:e.blurIn,input:function(t){t.target.composing||(e.userPhone=t.target.value)}}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.downPhone_,expression:"downPhone_"}],staticClass:"Phone",on:{click:function(t){return e.downPhone()}}},[e._m(3)])]),e._v(" "),n("li",[n("div",{staticClass:"starLeft"},[e._m(4),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.verificationCode,expression:"verificationCode"}],attrs:{type:"number",placeholder:e.$t("m.Please_erification_code"),oninput:"if(value.length>6)value=value.slice(0,6)"},domProps:{value:e.verificationCode},on:{blur:e.blurIn,input:function(t){t.target.composing||(e.verificationCode=t.target.value)}}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode,expression:"sendAuthCode"}],staticClass:"rightInfo"},[n("btn-component",{attrs:{disabled:e.isDisabled1,replaceBg:e.isDisabled1},on:{click:function(t){return e.obtain()}}},[e._v(e._s(e.$t("m.Get_verification_code")))])],1),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"obtain active"},[n("span",[e._v(e._s(e.auth_time))]),e._v("s\n          ")])]),e._v(" "),n("li",[n("div",{staticClass:"starLeft",attrs:{id:"starLeft"}},[e._m(5),e._v(" "),"checkbox"===e.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{id:"text",placeholder:e.$t("m.Please_enter_characters"),maxlength:"16",type:"checkbox"},domProps:{checked:Array.isArray(e.pass)?e._i(e.pass,null)>-1:e.pass},on:{keyup:function(t){return e.getInputValue_()},blur:e.blurIn,change:function(t){var a=e.pass,n=t.target,s=!!n.checked;if(Array.isArray(a)){var r=e._i(a,null);n.checked?r<0&&(e.pass=a.concat([null])):r>-1&&(e.pass=a.slice(0,r).concat(a.slice(r+1)))}else e.pass=s}}}):"radio"===e.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{id:"text",placeholder:e.$t("m.Please_enter_characters"),maxlength:"16",type:"radio"},domProps:{checked:e._q(e.pass,null)},on:{keyup:function(t){return e.getInputValue_()},blur:e.blurIn,change:function(t){e.pass=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{id:"text",placeholder:e.$t("m.Please_enter_characters"),maxlength:"16",type:e.inputType},domProps:{value:e.pass},on:{keyup:function(t){return e.getInputValue_()},blur:e.blurIn,input:function(t){t.target.composing||(e.pass=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"hide"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.downPass_,expression:"downPass_"}],staticClass:"right",on:{click:function(t){return e.downPass()}}},[e._m(6)]),e._v(" "),n("div",{staticClass:"left"},[e.eye?n("div",{staticClass:"eyes_",on:{click:function(t){return e.showPassword()}}},[n("img",{attrs:{src:a("xPMD"),alt:""}})]):n("div",{staticClass:"eyes",on:{click:function(t){return e.showPassword()}}},[n("img",{attrs:{src:a("hhBA"),alt:""}})])])])])]),e._v(" "),n("div",{staticClass:"complete"},[n("btn-component",{attrs:{disabled:e.isDisabled,replaceBg:e.isDisabled},on:{click:function(t){return e.complete()}}},[e._v(e._s(e.$t("m.complete")))])],1)]),e._v(" "),n("div")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:a("82O5"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("img",{attrs:{src:a("wT03"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"star"},[t("img",{attrs:{src:a("b/Ba"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"down"},[t("img",{attrs:{src:a("0/cF"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"star"},[t("img",{attrs:{src:a("b/Ba"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"star"},[t("img",{attrs:{src:a("b/Ba"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"down"},[t("img",{attrs:{src:a("0/cF"),alt:""}})])}]};var f=a("VU/8")(m,_,!1,function(e){a("WvBT")},"data-v-592ffaa0",null);t.default=f.exports}});