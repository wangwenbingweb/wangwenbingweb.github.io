webpackJsonp([34],{OLiQ:function(e,t){},zOUD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),r=a("exGp"),o=a.n(r),i=a("bOdI"),c=a.n(i),u=(a("eqfM"),a("/QYm")),d={components:c()({},u.a.name,u.a),name:"changePassword",data:function(){return{sendAuthCode:!0,auth_time:0,userPhone:this.$store.state.mobile||"",code:this.$store.state.areaCode||"",pass:"",verificationCode:"",inputType:"password",eye:!0,downPass_:!1,token:this.$store.state.token||"",taskId:""}},computed:{scrollHeight:function(){return document.documentElement.scrollTop||document.body.scrollTop||0},isDisabled:function(){return!this.verificationCode||!this.pass}},methods:{blurIn:function(){window.scrollTo(0,Math.max(this.scrollHeight-1,0))},getInputValue:function(){this.pass.length>=1?this.downPass_=!0:this.downPass_=!1},downPass:function(){this.pass="",this.downPass_=!this.downPass_},showPassword:function(){var e=this;e.eye?(e.eye=!1,e.inputType="text"):(e.eye=!0,e.inputType="password")},countdown:function(){var e=this;this.sendAuthCode=!1,this.auth_time=60;var t=setInterval(function(){e.auth_time--,e.auth_time<=0&&(e.sendAuthCode=!0,clearInterval(t))},1e3)},obtain:function(){var e=this;return o()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("phoneNum",e.userPhone),a.append("areaCode",e.code),a.append("sendType","forget"),t.next=6,e.$api.sendSms(a);case 6:if(2e4==(s=t.sent).data.code){t.next=15;break}if(200!=s.data.code){t.next=13;break}Object(u.a)({message:"发送验证码成功",position:"bottom",duration:2e3}),e.countdown(),t.next=15;break;case 13:return Object(u.a)(s.data.message),t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,e)}))()},forgotPwd:function(){var e=this;return o()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]{6,20}$/.test(e.pass)){t.next=4;break}return Object(u.a)("密码不规范，请重新输入"),t.abrupt("return",!1);case 4:return(a=new FormData).append("phoneNum",e.userPhone),a.append("areaCode",e.code),a.append("verifyCode",e.verificationCode),a.append("password",e.pass),t.next=11,e.$api.forgotPwd(a);case 11:if(2e4==(s=t.sent).data.code){t.next=19;break}if(200!=s.data.code){t.next=17;break}e.$router.go(-1),t.next=19;break;case 17:return Object(u.a)("修改密码成功"),t.abrupt("return",!1);case 19:case"end":return t.stop()}},t,e)}))()}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"changePassword"},[s("div",{staticClass:"prompt"},[s("p",[e._v(e._s(e.$t("m.Please_enter"))+"+"+e._s(e.code)+e._s(e._f("formatPhone")(e.userPhone))+e._s(e.$t("m.Received_SMS_verification_code")))])]),e._v(" "),s("div",{staticClass:"form"},[s("ul",[s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.verificationCode,expression:"verificationCode"}],attrs:{type:"number",placeholder:e.$t("m.Please_erification_code"),oninput:"if(value.length>6)value=value.slice(0,6)"},domProps:{value:e.verificationCode},on:{blur:e.blurIn,input:function(t){t.target.composing||(e.verificationCode=t.target.value)}}}),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode,expression:"sendAuthCode"}],staticClass:"obtain",on:{click:function(t){return e.obtain()}}},[e._v(e._s(e.$t("m.Get_verification_code")))]),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"obtain active"},[s("span",[e._v(e._s(e.auth_time))]),e._v("s\n        ")])]),e._v(" "),s("li",["checkbox"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{id:"text",placeholder:e.$t("m.Please_enter_characters"),oninput:"if(value.length>16)value=value.slice(0,16)",type:"checkbox"},domProps:{checked:Array.isArray(e.pass)?e._i(e.pass,null)>-1:e.pass},on:{keyup:function(t){return e.getInputValue()},blur:e.blurIn,change:function(t){var a=e.pass,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=e._i(a,null);s.checked?r<0&&(e.pass=a.concat([null])):r>-1&&(e.pass=a.slice(0,r).concat(a.slice(r+1)))}else e.pass=n}}}):"radio"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{id:"text",placeholder:e.$t("m.Please_enter_characters"),oninput:"if(value.length>16)value=value.slice(0,16)",type:"radio"},domProps:{checked:e._q(e.pass,null)},on:{keyup:function(t){return e.getInputValue()},blur:e.blurIn,change:function(t){e.pass=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{id:"text",placeholder:e.$t("m.Please_enter_characters"),oninput:"if(value.length>16)value=value.slice(0,16)",type:e.inputType},domProps:{value:e.pass},on:{keyup:function(t){return e.getInputValue()},blur:e.blurIn,input:function(t){t.target.composing||(e.pass=t.target.value)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.downPass_,expression:"downPass_"}],staticClass:"hide"},[s("div",{staticClass:"left"},[e.eye?s("div",{staticClass:"eyes_",on:{click:function(t){return e.showPassword()}}},[s("img",{attrs:{src:a("xPMD"),alt:""}})]):s("div",{staticClass:"eyes",on:{click:function(t){return e.showPassword()}}},[s("img",{attrs:{src:a("hhBA"),alt:""}})])]),e._v(" "),s("div",{staticClass:"right",on:{click:function(t){return e.downPass()}}},[e._m(0)])])])])]),e._v(" "),s("div",{staticClass:"complete"},[s("btn-component",{attrs:{disabled:e.isDisabled,replaceBg:e.isDisabled},on:{click:function(t){return e.forgotPwd()}}},[e._v(e._s(e.$t("m.complete")))])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"down"},[t("img",{attrs:{src:a("0/cF"),alt:""}})])}]};var p=a("VU/8")(d,l,!1,function(e){a("OLiQ")},"data-v-6cc5bfe7",null);t.default=p.exports}});